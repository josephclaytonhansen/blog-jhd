import{u as j,i as E,r as m,h as c,c as l,t as h,j as w,d as p,e as i,w as b,v as f,k as y,l as $,m as _,p as k,n as C,q as A}from"./index-Cj3NP1es.js";const R={class:"bg-backdrop-2 text-text-0 p-8 m-w-[500px] w-1/2 h-auto m-auto rounded-xl"},U={key:0,class:"text-4xl mb-5 text-center border-b-2 border-b-backdrop-700 pb-4"},B={key:1,class:"text-4xl mb-5 text-center border-b-2 border-b-backdrop-700 pb-4"},I={class:"flex w-full gap-3 mb-3 flex-wrap"},M={class:"cursor-pointer bg-accent-600 px-5 py-2 rounded text-text-0 hover:bg-accent-700 hover:scale-105 transition-all duration-300 grow",type:"submit"},Y={key:0,class:"text-sm italic text-text-2"},q={key:1,class:"text-sm italic text-text-2"},z={__name:"login",setup(L){const e=j(),v=window.location.host,x=E(),u=m(""),n=m(""),d=m(""),a=m(!1),P=()=>{if(!u.value){e.error("Please enter an email address");return}if(!n.value){e.error("Please enter a password");return}const g=_(k);e.info("Logging in...");let t=u.value,s=n.value,r={email:t,password:s,site:window.location.hostname},V={headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},withCredentials:!0},D="https://seabass.josephhansen.dev/user/login";try{C.post(D,r,V).then(o=>{e.success("Login successful"),o.data&&(g.login(o.data),sessionStorage.setItem("session",o.data.user.session),setTimeout(()=>{x.push("/")},2e3))}).catch(o=>{e.error(o.message||o.error||"Error logging in")})}catch(o){e.error(o.message||o.error||"Error logging in")}},T=()=>{if(!d.value){e.error("Please enter a display name");return}if(!u.value){e.error("Please enter an email address");return}if(!n.value){e.error("Please enter a password");return}if(n.value.length<=12){e.error("Password must be at least 12 characters");return}if(d.value.length<=8){e.error("Display name must be at least 8 characters");return}if(d.value.length>48){e.error("Display name cannot be more than 48 characters");return}const g=_(k);e.info("Registering...");let t={headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},withCredentials:!0};C.post("https://seabass.josephhansen.dev/user/create",{email:u.value,password:n.value,displayName:d.value,site:window.location.hostname},t).then(r=>{e.success("Your registration was successful. Please check your email for verification."),r.data&&(g.login(r.data),sessionStorage.setItem("session",r.data.user.session),setTimeout(()=>{x.push("/")},2e3))}).catch(r=>{e.error(r.response.data.message||r.message||r.error||"Error creating user")})},N=()=>{a.value=!0},S=()=>{a.value=!1};return(g,t)=>(c(),l("div",R,[a.value?p("",!0):(c(),l("h1",U,"Login to "+h(w(v)),1)),a.value?(c(),l("h1",B,"Create an account on "+h(w(v)),1)):p("",!0),i("form",{onSubmit:t[3]||(t[3]=$(s=>a.value?T():P(),["prevent"]))},[i("div",I,[b(i("input",{title:"Your email address- this will not be visible publicly",class:"grow rounded p-2 bg-backdrop-1 text-text-0 active:ring-2 active:ring-accent-300 accent-accent-600 focus:ring-3 focus:ring-accent-300 accent-accent-300",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),placeholder:"Email"},null,512),[[f,u.value]]),b(i("input",{title:"A secure password",class:"grow rounded p-2 bg-backdrop-1 text-text-0 active:ring-2 active:ring-accent-300 accent-accent-600 focus:ring-3 focus:ring-accent-300 accent-accent-300",type:"password","onUpdate:modelValue":t[1]||(t[1]=s=>n.value=s),placeholder:"Password  (at least 12 characters)"},null,512),[[f,n.value]]),a.value?b((c(),l("input",{key:0,title:"The name or username that will be publicly visible",class:"grow rounded p-2 bg-backdrop-1 text-text-0 active:ring-2 active:ring-accent-300 accent-accent-600 focus:ring-3 focus:ring-accent-300 accent-accent-300",type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),placeholder:"Display Name"},null,512)),[[f,d.value]]):p("",!0),i("button",M,h(a.value?"Sign up":"Login"),1)]),a.value?p("",!0):(c(),l("p",Y,[y("Don't have an account? "),i("button",{class:"hover:text-text-0 transition-all duration-300",onClick:N},"Sign up")])),a.value?(c(),l("p",q,[y("Already have an account? "),i("button",{class:"hover:text-text-0 transition-all duration-300",onClick:S},"Login")])):p("",!0)],32)]))}},F={class:"flex bg-backdrop-3 h-[100vh] overflow-hidden w-full"},H={__name:"Login",setup(L){return(e,v)=>(c(),l("div",F,[A(z)]))}};export{H as default};
