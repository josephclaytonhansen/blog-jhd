import{u as D,i as E,r as m,h as l,c as i,t as b,j as _,d as p,e as a,w as x,v as f,k as g,l as $,m as y,p as k,n as C,q as A}from"./index-DgndfrZJ.js";const R={class:"bg-backdrop-2 text-text-0 p-8 m-w-[500px] w-1/2 h-auto m-auto rounded-xl"},U={key:0,class:"text-4xl mb-5 text-center border-b-2 border-b-backdrop-700 pb-4"},B={key:1,class:"text-4xl mb-5 text-center border-b-2 border-b-backdrop-700 pb-4"},I={class:"flex w-full gap-3 mb-3 flex-wrap"},Y={class:"cursor-pointer bg-accent-600 px-5 py-2 rounded text-text-0 hover:bg-accent-700 hover:scale-105 transition-all duration-300 grow",type:"submit"},M={key:0,class:"text-sm italic text-text-2"},q={key:1,class:"text-sm italic text-text-2"},z=a("hr",{class:"border-backdrop-1 my-5"},null,-1),F=a("p",{class:"text-sm text-normal text-text-3"},[g("Your login for "),a("a",{class:"text-accent-700",href:"https://hansenstudios.art"},"hansenstudios.art"),g(" and "),a("a",{class:"text-accent-700",href:"https://blog.josephhansen.dev"},"blog.josephhansen.dev"),g(" are the same. If you have an account on one, your credentials will work on both.")],-1),G={__name:"login",setup(L){const e=D(),v=window.location.host,w=E(),u=m(""),c=m(""),d=m(""),s=m(!1),P=()=>{if(!u.value){e.error("Please enter an email address");return}if(!c.value){e.error("Please enter a password");return}const h=y(k);e.info("Logging in...");let t=u.value,r=c.value,o={email:t,password:r},S={headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},withCredentials:!0},V="https://seabass.josephhansen.dev/user/login";try{C.post(V,o,S).then(n=>{e.success("Login successful"),n.data&&(h.login(n.data),sessionStorage.setItem("session",n.data.user.session),setTimeout(()=>{w.push("/")},2e3))}).catch(n=>{e.error(n.message||n.error||"Error logging in")})}catch(n){e.error(n.message||n.error||"Error logging in")}},T=()=>{if(!d.value){e.error("Please enter a display name");return}if(!u.value){e.error("Please enter an email address");return}if(!c.value){e.error("Please enter a password");return}if(c.value.length<=12){e.error("Password must be at least 12 characters");return}if(d.value.length<=8){e.error("Display name must be at least 8 characters");return}if(d.value.length>48){e.error("Display name cannot be more than 48 characters");return}const h=y(k);e.info("Registering...");let t={headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},withCredentials:!0};C.post("https://seabass.josephhansen.dev/user/create",{email:u.value,password:c.value,displayName:d.value},t).then(o=>{e.success("Your registration was successful. Please check your email for verification."),o.data&&(h.login(o.data),sessionStorage.setItem("session",o.data.user.session),setTimeout(()=>{w.push("/")},2e3))}).catch(o=>{e.error(o.response.data.message||o.message||o.error||"Error creating user")})},j=()=>{s.value=!0},N=()=>{s.value=!1};return(h,t)=>(l(),i("div",R,[s.value?p("",!0):(l(),i("h1",U,"Login to "+b(_(v)),1)),s.value?(l(),i("h1",B,"Create an account on "+b(_(v)),1)):p("",!0),a("form",{onSubmit:t[3]||(t[3]=$(r=>s.value?T():P(),["prevent"]))},[a("div",I,[x(a("input",{title:"Your email address- this will not be visible publicly",class:"grow rounded p-2 bg-backdrop-1 text-text-0 active:ring-2 active:ring-accent-300 accent-accent-600 focus:ring-3 focus:ring-accent-300 accent-accent-300",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),placeholder:"Email"},null,512),[[f,u.value]]),x(a("input",{title:"A secure password",class:"grow rounded p-2 bg-backdrop-1 text-text-0 active:ring-2 active:ring-accent-300 accent-accent-600 focus:ring-3 focus:ring-accent-300 accent-accent-300",type:"password","onUpdate:modelValue":t[1]||(t[1]=r=>c.value=r),placeholder:"Password  (at least 12 characters)"},null,512),[[f,c.value]]),s.value?x((l(),i("input",{key:0,title:"The name or username that will be publicly visible",class:"grow rounded p-2 bg-backdrop-1 text-text-0 active:ring-2 active:ring-accent-300 accent-accent-600 focus:ring-3 focus:ring-accent-300 accent-accent-300",type:"text","onUpdate:modelValue":t[2]||(t[2]=r=>d.value=r),placeholder:"Display Name"},null,512)),[[f,d.value]]):p("",!0),a("button",Y,b(s.value?"Sign up":"Login"),1)]),s.value?p("",!0):(l(),i("p",M,[g("Don't have an account? "),a("button",{class:"hover:text-text-0 transition-all duration-300",onClick:j},"Sign up")])),s.value?(l(),i("p",q,[g("Already have an account? "),a("button",{class:"hover:text-text-0 transition-all duration-300",onClick:N},"Login")])):p("",!0),z,F],32)]))}},H={class:"flex bg-backdrop-3 h-[100vh] overflow-hidden w-full"},K={__name:"Login",setup(L){return(e,v)=>(l(),i("div",H,[A(G)]))}};export{K as default};
